package com.mailgun.model.templates;

import com.mailgun.enums.YesNo;
import lombok.Builder;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.ToString;

/**
 * <p>
 * Template new version request.
 * </p>
 *
 * @see <a href="https://documentation.mailgun.com/en/latest/api-templates.html">Templates</a>
 */
@Getter
@ToString
@EqualsAndHashCode
@Builder
public class TemplateVersionRequest {

    /**
     * <p>
     * Content of the template.
     * </p>
     */
    String template;

    /**
     * <p>
     * (Optional) Initial tag of the created version. If template parameter is provided and tag is missing default value initial is used.
     * </p>
     * <p>
     * The tag can contain alpha characters, digits and next symbols: <code>.-_~</code>
     * </p>
     */
    String tag;

    /**
     * <p>
     * (Optional) Template engine.
     * </p>
     * <p>
     * The only engine currently supported is <code>handlebars</code>.
     * </p>
     */
    String engine;

    /**
     * <p>
     * (Optional) Comments relating to the stored version.
     * </p>
     */
    String comment;

    /**
     * <p>
     * (Optional) If this flag is set to <code>YES</code>, this version becomes active.
     * </p>
     */
    String active;

    /**
     * <p>
     * (Optional) Key value JSON object of headers to be stored with the template version.
     * Where key is the header name and value is the header value.
     * The header names <code>From</code>, <code>Subject</code>, and <code>Reply-To</code> are the only ones currently supported.
     * These headers will be inserted into the MIME at the time we attempt delivery.
     * </p>
     * <p>
     * Headers set at the message level will override headers set on the template.
     * e.g. Setting the From header at the time of sending will override the From header saved on the template.
     * Additionally, headers generated by templates are not reflected on the accepted event as they are not prepended to the message until the message is prepped for delivery.
     * If a From header is not provided either in the message or template, we will default to <code>postmaster@your-sending-domain.tld</code>
     * </p>
     */
    String headers;

    public static class TemplateVersionRequestBuilder {

        /**
         * <p>
         * (Optional) If this flag is set to <code>TRUE</code>, this version becomes active.
         * <p>
         *
         * @param active flag whether the version is active
         * @return Returns a reference to this object so that method calls can be chained together.
         */
        public TemplateVersionRequest.TemplateVersionRequestBuilder active(boolean active) {
            if (active) {
                this.active = YesNo.YES.getValue();
            }
            return this;
        }
    }

}
